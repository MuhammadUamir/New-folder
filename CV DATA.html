<!DOCTYPE html>
<html>
  <head>
    <title>CV Generator</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <style>
      body {
        height: 100%;
        width: 100%;
      }
      .left-sidebar-secondary-heading {
        background: #414548;
        padding: 0.6rem 1.2rem;
        line-height: 1;
        font-size: 1.2rem;
        text-transform: capitalize;
      }
      .fw-lighter {
        font-size: 0.8rem;
      }
      .sub-head {
        padding-left: 1rem;
      }
      .progress {
        background-color: #0f0f0fa6;
        padding: 0.2rem;
        margin-bottom: 1rem;
        margin-right: 1.5rem;
      }
      .progress-bar {
        background-color: white;
      }
      .exp {
        display: grid;
        grid-template-columns: 2fr 2fr 2fr;
      }
      #Link_label {
        margin-top: 1rem;
      }
      .form-label {
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <h2 style="text-align: center">Cv Data</h2>
      <div class="row">
        <!-- NAME -->
        <section class="col-md-4">
          <div class="name mb-3">
            <label for="name" class="form-label">Name</label>
            <input
              type="text"
              class="form-control"
              id="name"
              placeholder="Name"
            />
          </div>

          <!-- PICTURE -->

          <div class="name mb-3">
            <label for="profile" class="form-label"
              >Profile
              <img class="img img-fluid rounded-circle" src="" id="photo"
            /></label>

            <input
              type="file"
              class="form-control"
              id="profile"
              placeholder="photo"
              accept="image/*"
              onchange="updatePhoto('id','photo')"
            />
          </div>

          <!-- OBECTIVE -->
          <div class="col-md-12">
            <label for="objective" class="form-label">Objective</label>
            <textarea
              class="form-control"
              for="objective_description"
              id="objective"
            ></textarea>
          </div>

          <!-- CONTACT -->
          <div class="name mb-3">
            <label for="contact" class="form-label">Contact</label>
            <input
              type="text"
              class="form-control"
              id="contact"
              placeholder="Contact"
            />
          </div>

          <!-- EMAIL -->
          <div class="name mb-3">
            <label for="email" class="form-label">E-mail</label>
            <input
              type="text"
              class="form-control"
              id="email"
              placeholder="E-mail"
            />
          </div>

          <!-- SKILLS -->

          <div class="card">
            <div class="name mb-3 card-header fw-bold">
              <label for="skill" class="form-label">Skills</label>
              <input
                type="text"
                class="form-control"
                id="skills"
                placeholder="Skills"
              />
            </div>
            <div class="card-footer text-center">
              <button
                class="btn btn-primary"
                type="button"
                onclick="skills_add()"
              >
                Add
              </button>

              <button class="btn btn-danger" id="remove">Remove</button>
            </div>
            <div id="skills_display"></div>
          </div>

          <!-- LINKS -->
          <div class="card">
            <div class="name mb-3 card-header fw-bold">
              <label for="link" class="form-label" id="Link_label">Links</label>
              <input
                class="form-control"
                placeholder="Links"
                type="text"
                value=""
                id="ip"
                name="links_b"
              />
            </div>
            <div>
              <div class="card-footer text-center">
                <button
                  class="btn btn-primary"
                  type="button"
                  onclick="links_add()"
                >
                  Add
                </button>
              </div>
            </div>
            <div id="links_display"></div>
          </div>
        </section>

        <section class="col-md-8">
          <!-- PROJECTS -->
          <div class="card">
            <div class="card-header fw-bold">Project</div>
            <div id="add_p" class="card-body"></div>
            <div class="card-footer text-center">
              <button
                class="btn btn-primary"
                type="button"
                onclick="add_project()"
                id="p-add"
              >
                Add Project
              </button>
            </div>
          </div>

          <!-- Education -->

          <div class="card">
            <div class="card-header fw-bold">Education</div>
            <div id="add_E" class="card-body"></div>
            <div class="card-footer text-center">
              <button
                class="btn btn-primary"
                type="button"
                onclick="add_education()"
                id="add"
              >
                Add Education
              </button>
            </div>
          </div>

          <!-- EXPERIENCE -->

          <div class="card">
            <div class="card-header fw-bold">Experience</div>
            <div id="add_exp" class="card-body"></div>
            <div class="card-footer text-center">
              <button
                class="btn btn-primary"
                type="button"
                onclick="add_experience()"
                id="add"
              >
                Add Experience
              </button>
            </div>
          </div>

          <!-- LANGUAGE -->
          <div class="lang col-md-8">
            <label for="language" class="form-label">Languages</label>
            <input
              placeholder="languages"
              class="form-control"
              type="text"
              id="language"
              value=""
            />
          </div>
        </section>
        <!-- SUBMIT BUTTON -->
        <div class="text-center">
          <button
            onclick="save_form()"
            class="btn btn-primary mt-3"
            id="submit"
            type="button"
            value="submit"
          >
            Submit
          </button>
        </div>
        <div id="errors"></div>
      </div>

      <div id="cv" class="row m-2"></div>
    </div>
    <!-- CV OPTIONS  -->
    <div>
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          type="radio"
          name="inlineRadioOptions"
          id="inlineRadio1"
          value="option1"
          checked
        />
        <label for="inlineRadio1"
          ><img
            src="https://www.coolfreecv.com/images/cv_templates_with_photo.jpg"
            alt=""
        /></label>
      </div>
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          type="radio"
          name="inlineRadioOptions"
          id="inlineRadio2"
          value="option1"
        />
        <label for="inlineRadio2"
          ><img
            src="https://www.coolfreecv.com/images/cv_templates_with_photo.jpg"
            alt=""
        /></label>
      </div>
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          type="radio"
          name="inlineRadioOptions"
          id="inlineRadio3"
          value="option1"
        />
        <label for="inlineRadio3"
          ><img
            src="https://www.coolfreecv.com/images/cv_templates_with_photo.jpg"
            alt=""
        /></label>
      </div>
    </div>

    <script>
      var project_id_number = 1;
      var education_id_number = 1;
      var experience_id_number = 1;
      function initRender() {
        add_education();
        add_project();
        add_experience();
      }

      // profile.addEventListener("change", updatePhoto);

      function updatePhoto(type, name) {
        let profile = document.getElementById("profile");
        let photos;
        if (type == "id") {
          let image = document.getElementById(name);
          photos = [image];
        }
        if (type == "class") {
          photos = document.getElementsByClassName(name);
        }
        let file = profile.files;
        console.log(photos);
        for (var i = 0; i < photos.length; i++) {
          if (file.length > 0) {
            photos[i].classList.remove("d-none");
            photos[i].setAttribute("src", URL.createObjectURL(file[0]));
          } else {
            photos[i].classList.add("d-none");
          }
        }
      }

      // var links = document.querySelectorAll('input[name="links"]');

      // function getLinkValue() {
      //   links.forEach((element) => {
      //     if (element.checked) {
      //       //console.log(element);
      //       let val = element.value;
      //       //console.log(val);
      //       let elem = document.getElementById("ip");
      //       elem.value = val;
      //       //console.log(elem);
      //       // if (val == "linkedin") {
      //       //   //elem.setAttribute("value", "https://linkedin.com/in/");
      //       //   // https://linkedin.com/in/
      //       //   elem.value = "linkin.com/in";
      //       // }
      //       // if (val == "github") {
      //       //   elem.value = "github.com";
      //       // }
      //     }
      //   });
      // }

      // CHECKBOX VALUES

      function getLangValue() {
        var language = document.querySelector("#language");
        var langsArr = language.value.split(",");

        return langsArr;

        //console.log(langStr);
      }

      // PROFILE PICTURE
      let loadFile = function (event) {
        let pic = document.getElementById("profile");
        pic.src = URL.createObjectURL(event.target.files[0]);

        // pic.files[0];

        // if(file.length > 0);
      };
      // EDUCATION-ELEMENTS
      var add_e = document.getElementById("add_E");

      function add_education() {
        var temp_div = document.createElement("div");
        temp_div.classList.add("row", "mt-2");
        // temp_div.setAttribute("id", "education_row_");
        temp_div.setAttribute("id", "education_row_" + education_id_number);

        let degreeContainer = document.createElement("div");
        degreeContainer.classList.add("col-md-3");

        var new_dn = document.createElement("input");
        new_dn.classList.add("form-control");
        new_dn.setAttribute("type", "text");
        new_dn.setAttribute("name", "dname");
        new_dn.setAttribute("id", "dname_" + education_id_number);

        let degreeLable = document.createElement("label");
        degreeLable.classList.add("form-label");
        degreeLable.setAttribute("for", "dname_" + education_id_number);
        degreeLable.innerText = "Degree Name ";
        degreeContainer.appendChild(degreeLable);
        degreeContainer.appendChild(new_dn);
        temp_div.appendChild(degreeContainer);

        //
        let sdateContainer = document.createElement("div");
        sdateContainer.classList.add("col-md-3");

        var new_sd = document.createElement("input");
        new_sd.classList.add("form-control");
        new_sd.setAttribute("type", "date");
        new_sd.setAttribute("name", "sdate");
        new_sd.setAttribute("id", "sdate_" + education_id_number);
        //new_sd.setAttribute("onclick", "setDate()");

        let start_date = document.createElement("label");
        start_date.classList.add("form-label");
        start_date.setAttribute("for", "sdate_" + education_id_number);
        start_date.innerText = "Start Date ";
        sdateContainer.appendChild(start_date);
        sdateContainer.appendChild(new_sd);
        temp_div.appendChild(sdateContainer);

        //
        let edateContainer = document.createElement("div");
        edateContainer.classList.add("col-md-3");

        var new_ed = document.createElement("input");
        new_ed.classList.add("form-control");
        new_ed.setAttribute("type", "date");
        new_ed.setAttribute("name", "edate");
        new_ed.setAttribute("id", "edate_" + education_id_number);
        //new_ed.setAttribute("onclick", "setDate()");

        let end_date = document.createElement("label");
        end_date.classList.add("form-label");
        end_date.setAttribute("for", "edate_" + education_id_number);
        end_date.innerText = "End Date ";
        edateContainer.appendChild(end_date);
        edateContainer.appendChild(new_ed);
        temp_div.appendChild(edateContainer);

        //
        let instituteContainer = document.createElement("div");
        instituteContainer.classList.add("col-md-3");

        var new_institute = document.createElement("input");
        new_institute.classList.add("form-control");
        new_institute.setAttribute("type", "text");
        new_institute.setAttribute("name", "iname");
        new_institute.setAttribute("id", "iname_" + education_id_number);

        let institute_lable = document.createElement("label");
        institute_lable.classList.add("form-label");
        institute_lable.setAttribute("for", "iname_" + education_id_number);
        institute_lable.setAttribute("data-id", education_id_number);

        institute_lable.innerText = "Institute Name ";
        instituteContainer.appendChild(institute_lable);
        instituteContainer.appendChild(new_institute);
        temp_div.appendChild(instituteContainer);

        add_e.appendChild(temp_div);
        education_id_number++;
      }

      // DATE VALIDATION

      // function getEndDate() {
      //   var todayDate = new Date();
      //   var month = todayDate.getMonth() + 1;
      //   var year = todayDate.getFullYear();
      //   var tdate = todayDate.getDate();
      //   if (month < 10) {
      //     month = "0" + month;
      //   }
      //   if (tdate < 10) {
      //     tdate = "0" + tdate;
      //   }
      //   var maxDate = year + "-" + month + "-" + tdate;
      //   document.getElementById("edate_").setAttribute("max", maxDate);
      // }

      // function getDates(start_date, end_date) {
      //   let sd = new Date(start_date);
      //   let ed = new Date(end_date);

      //   if (start_date < end_date) {
      //     return true;
      //   }
      //   return false;
      // }

      // document.addEventListener("click", function (e) {
      //   console.log(e.target);
      //   console.log(e.target.dataset);
      //   if (e.target.dataset && e.target.id == "edate_" + e.target.dataset.id) {
      //     let elem = e.target;
      //     let start_elem = document.getElementById(
      //       "sdate_" + e.target.dataset.id
      //     );
      //     if (
      //       start_elem.value !== undefined &&
      //       start_elem.value !== null &&
      //       start_elem.value !== ""
      //     ) {
      //       if (
      //         getDates(start_elem.value, elem.value) <
      //         getEndDate(e.target.id, elem.value)
      //       ) {
      //         return true;
      //       }
      //       return false;
      //     }
      //   }
      // });

      // EXPERIENCE-ELEMENTS

      var Exp = document.getElementById("add_exp");

      function add_experience() {
        var exp_div = document.createElement("div");
        exp_div.classList.add("row", "mt-2");
        exp_div.setAttribute("id", "experience_row_" + experience_id_number);

        let experienceContainer = document.createElement("div");
        experienceContainer.classList.add("col-md-3");

        var new_company = document.createElement("input");
        new_company.classList.add("form-control");
        new_company.setAttribute("type", "text");
        new_company.setAttribute("name", "cname");
        new_company.setAttribute("id", "company_title" + experience_id_number);

        let companyLable = document.createElement("label");
        companyLable.classList.add("form-label");
        companyLable.setAttribute(
          "for",
          "company_title" + experience_id_number
        );
        companyLable.innerText = "Company Name";
        experienceContainer.appendChild(companyLable);
        experienceContainer.appendChild(new_company);
        exp_div.appendChild(experienceContainer);
        //
        let sdateContainer = document.createElement("div");
        sdateContainer.classList.add("col-md-3");

        var new_sd = document.createElement("input");
        new_sd.classList.add("form-control");
        new_sd.setAttribute("type", "date");
        new_sd.setAttribute("name", "sdate");
        new_sd.setAttribute("id", "sdate_" + experience_id_number);

        let start_date = document.createElement("label");
        start_date.classList.add("form-label");
        start_date.setAttribute("for", "sdate_" + experience_id_number);
        start_date.innerText = "Start Date ";
        sdateContainer.appendChild(start_date);
        sdateContainer.appendChild(new_sd);
        exp_div.appendChild(sdateContainer);
        //
        let edateContainer = document.createElement("div");
        edateContainer.classList.add("col-md-3");

        var new_ed = document.createElement("input");
        new_ed.classList.add("form-control");
        new_ed.setAttribute("type", "date");
        new_ed.setAttribute("name", "edate");
        new_ed.setAttribute("id", "edate_" + experience_id_number);

        let end_date = document.createElement("label");
        end_date.classList.add("form-label");
        end_date.setAttribute("for", "edate_" + experience_id_number);
        end_date.innerText = "End Date ";
        edateContainer.appendChild(end_date);
        edateContainer.appendChild(new_ed);
        exp_div.appendChild(edateContainer);
        //
        var jobDescriptionContainer = document.createElement("div");
        jobDescriptionContainer.classList.add("col-md-3");

        var textarea = document.createElement("input");
        textarea.classList.add("form-control");
        textarea.setAttribute("name", "jname");
        textarea.setAttribute("id", "job_description_" + experience_id_number);

        let text_lable = document.createElement("label");
        text_lable.classList.add("form-label");
        text_lable.setAttribute(
          "for",
          "job_description_" + experience_id_number
        );
        text_lable.innerText = "Job description ";

        jobDescriptionContainer.appendChild(text_lable);
        jobDescriptionContainer.appendChild(textarea);
        exp_div.appendChild(jobDescriptionContainer);

        Exp.appendChild(exp_div);
        experience_id_number++;
      }

      // PROJECTS-ELEMENTS

      function add_project() {
        var p = document.getElementById("add_p");
        var projects_div = document.createElement("div");
        projects_div.classList.add("row", "mt-2");
        projects_div.setAttribute("id", "project_row_" + project_id_number);

        var projectsContainer = document.createElement("div");
        projectsContainer.classList.add("col-md-4");

        var projectName = document.createElement("input");
        projectName.setAttribute("name", "pname");
        projectName.classList.add("form-control");

        let project_lable = document.createElement("label");
        project_lable.classList.add("form-label");
        project_lable.setAttribute("for", "project_title_" + project_id_number);
        project_lable.innerText = "Project ";

        projectsContainer.appendChild(project_lable);
        projectsContainer.appendChild(projectName);
        projects_div.appendChild(projectsContainer);

        //
        var descriptionContainer = document.createElement("div");
        descriptionContainer.classList.add("col-md-8");

        var textarea = document.createElement("textarea");
        textarea.classList.add("form-control");
        textarea.setAttribute("name", "tarea");
        textarea.setAttribute("id", "project_description_" + project_id_number);

        let text_lable = document.createElement("label");
        text_lable.classList.add("form-label");
        text_lable.setAttribute(
          "for",
          "project_description_" + project_id_number
        );
        text_lable.innerText = "Project description ";

        descriptionContainer.appendChild(text_lable);
        descriptionContainer.appendChild(textarea);
        projects_div.appendChild(descriptionContainer);

        p.appendChild(projects_div);
        project_id_number++;
      }

      // skills-ELEMENTS
      var add_s = document.getElementById("skills_area");

      function add() {
        var M_div = document.createElement("div");
        var new_in = document.createElement("input");
        var new_sl = document.createElement("select");

        new_sl.setAttribute("name", "expertise");

        let new_s = document.createElement("span");
        new_s.innerText = "";
        M_div.appendChild(new_s);
        M_div.appendChild(new_in);

        let new_p = document.createElement("span");
        new_p.innerText = "Expertise: ";
        M_div.appendChild(new_p);
        M_div.appendChild(new_sl);

        add_s.appendChild(M_div);
      }

      //SUBMIT BUTTON
      function save_form() {
        if (validate()) {
          var cVData = {
            name: document.getElementById("name").value,
            contact: document.getElementById("contact").value,
            email: document.getElementById("email").value,
            objective: document.getElementById("objective").value,
            links: all_links,
            language: getLangValue(),
          };

          cVData["skills"] = getSkills();

          cVData["Projects"] = getProjects();

          cVData["Educations"] = getEducations();
          cVData["Experiences"] = getExperience();
          //cVData = getLinkValue();

          console.log(cVData);

          template_design_2(cVData);
          //template_design_1(cVData);
          updatePhoto("id", "cvPhoto");
          // LINK

          // EDUCATION DATA

          // var education = document.querySelectorAll('input[name="dname"]');
          // var arr = [];

          // for (var i = 0; i < education.length; i++) {
          //   let obj = {};
          //   let dName = education[i].value;
          //   obj["certificateName"] = dName;
          //   arr.push(obj);
          // }

          // var start_date = document.querySelectorAll('input[name="sdate"]');
          // for (var i = 0; i < start_date.length; i++) {
          //   let sdate = start_date[i].value;
          //   obj = arr[i];
          //   obj["startDate"] = sdate;
          // }

          // var end_date = document.querySelectorAll('input[name="edate"]');
          // for (var i = 0; i < end_date.length; i++) {
          //   let edate = end_date[i].value;
          //   obj = arr[i];
          //   obj["endDate"] = edate;
          // }

          // console.log(arr);

          // var sills = document.querySelectorAll('input[name="dname"]');
          // var arr = [];

          // TO DISPLAY SKILLS ARRAY

          // var sal = document.querySelectorAll('select[name="expertise"]');
          // var arr = [];
          // for (var i = 0; i < sal.length; i++) {
          //   let obj = {};
          //   let skill = sal[i].id;
          //   obj["name"] = skill;
          //   let output = sal[i].value;
          //   obj["percentage"] = output;
          //   arr.push(obj);
          // }
          // console.log(arr);

          // PROJECTS
          // var Pro = document.querySelectorAll('input[name="pname"]');
          // var des = document.querySelectorAll('textarea[name="tarea"]');
          // var arr = [];

          // for (var i = 0; i < Pro.length; i++) {
          //   let obj = {};
          //   let pname = Pro[i].value;
          //   if (pname.trim() == "") {
          //     continue;
          //   }
          //   let tarea = des[i].value;
          //   obj["project"] = pname;
          //   obj["description"] = tarea;
          //   arr.push(obj);
          // }

          // var des = document.querySelectorAll('textarea[name="tarea"]');
          // for (var i = 0; i < des.length; i++) {
          //   let tarea = des[i].value;
          //   obj = arr[i];
          //   obj["description"] = tarea;
          // }
          //console.log(arr);

          // VALIDATION
        } else {
          display_errors();
        }
      }

      //INPUT FIELDS VALIDATION

      function validate() {
        let v1 = validateTextField();
        let v2 = validateEmail();
        return v1 && v2;
      }

      var error_array;
      function validateTextField() {
        var inputIds = ["name", "contact", "language"];
        error_array = [];

        let valid_fields = true;

        for (var i = 0; i < inputIds.length; i++) {
          var hasValue = document.getElementById(inputIds[i]).value;
          if (!hasValue.trim()) {
            error_array.push(inputIds[i] + " is invalid");
            if (valid_fields) {
              valid_fields = false;
            }
          }
        }
        return valid_fields;
      }

      function display_errors() {
        var errors_div = document.getElementById("errors");
        errors_div.innerHTML = "";
        errors_div.classList.add("errors", "text-danger");
        var list = document.createElement("ul");
        // for loop error_array
        for (var i = 0; i < error_array.length; i++) {
          var elm = document.createElement("li");

          let new_elm = document.createElement("span");
          new_elm.innerText = error_array[i]; // error message
          elm.appendChild(new_elm);
          list.appendChild(elm);
          errors_div.append(list);
        }
        // elm.setAttribute("id", "hasValue");

        // list item add in ul
        // end for loop
        // ul add in document;

        //document.body.appendChild(errors_div);
        // errors.appendChild(list);
        // console.log("errors");
      }

      //EMAIL VALIDATION

      function validateEmail() {
        var mail = document.getElementById("email");
        var regx = /^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/;

        let obj = {};
        if (regx.test(mail.value)) {
          //alert("valid Email");
          return true;
        } else {
          //alert("invalid Email");
          error_array.push("Email is invalid");
        }
      }

      //SKILLS
      function getSkills() {
        let skillsArr = [];
        var sal = document.querySelectorAll('select[name="expertise"]');

        for (var i = 0; i < sal.length; i++) {
          let obj = {};
          let skill = sal[i].id;
          obj["name"] = skill;
          let output = sal[i].value;
          obj["percentage"] = output;
          skillsArr.push(obj);
        }
        return skillsArr;
        //cvData.skills = skillsArr;
      }

      //PROJECTS
      function getProjects(cvData) {
        let projectArr = [];
        var Pro = document.querySelectorAll('input[name="pname"]');
        var des = document.querySelectorAll('textarea[name="tarea"]');
        for (var i = 0; i < Pro.length; i++) {
          let obj = {};
          let pname = Pro[i].value;
          if (pname.trim() == "") {
            continue;
          }
          let tarea = des[i].value;
          obj["project"] = pname;
          obj["description"] = tarea;
          projectArr.push(obj);
        }
        // var des = document.querySelectorAll('textarea[name="tarea"]');
        // for (var i = 0; i < des.length; i++) {
        //   let tarea = des[i].value;
        //   obj = projectArr[i];
        //   obj["description"] = tarea;
        // }
        return projectArr;
        //console.log(projectArr);
      }

      //EDUCATION
      function getEducations(cvData) {
        let EduArr = [];
        var education = document.querySelectorAll('input[name="dname"]');
        var start_date = document.querySelectorAll('input[name="sdate"]');
        var end_date = document.querySelectorAll('input[name="edate"]');
        var institute = document.querySelectorAll('input[name="iname"]');

        for (var i = 0; i < education.length; i++) {
          let obj = {};
          let dname = education[i].value;
          if (dname.trim() == "") {
            continue;
          }

          let sdate = start_date[i].value;
          let edate = end_date[i].value;
          let Iname = institute[i].value;

          obj["degreeName"] = dname;
          obj["startDate"] = sdate;
          obj["endDate"] = edate;
          obj["institute"] = Iname;

          EduArr.push(obj);
        }
        return EduArr;
      }

      //EXPERIENCE
      function getExperience(cvData) {
        let ExpArr = [];
        var company = document.querySelectorAll('input[name="cname"]');
        var start_date = document.querySelectorAll('input[name="sdate"]');
        var end_date = document.querySelectorAll('input[name="edate"]');
        var job_description = document.querySelectorAll('input[name="jname"]');

        for (var i = 0; i < company.length; i++) {
          let obj = {};
          let cname = company[i].value;
          if (cname.trim() == "") {
            continue;
          }

          let sdate = start_date[i].value;
          let edate = end_date[i].value;
          let jname = job_description[i].value;

          obj["companyName"] = cname;
          obj["startDate"] = sdate;
          obj["endDate"] = edate;
          obj["jobdescription"] = jname;

          ExpArr.push(obj);
        }
        return ExpArr;
      }

      // LINKS
      function isValidURL(url) {
        var pattern =
          /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
        if (pattern.test(url)) {
          return true;
        }
        error_array.push("Url is invalid");
        return false;
      }

      var all_links = [];

      function getUnique(array) {
        const unique = array.filter((value, index) => {
          return array.indexOf(value) === index;
        });
        return unique;
      }

      function links_add() {
        var linksInput = document.getElementById("ip").value;
        // console.log(linksInput);
        if (linksInput.trim() == "") {
          return;
        }
        let L_display = document.getElementById("links_display");
        L_display.innerHTML = "";

        let linkArr = linksInput.split(",");
        for (let i = 0; i < linkArr.length; i++) {
          if (!isValidURL(linkArr[i])) {
            continue;
          }
          all_links.push(linkArr[i]);
          //unique entry check in array
          // const unique = all_links.filter((value, index) => {
          //   return all_links.indexOf(value) === index;
          // });
          // console.log(unique);
        }
        all_links = getUnique(all_links);
        for (let i = 0; i < all_links.length; i++) {
          let para = document.createElement("a");
          para.classList.add(
            "bg-light",
            "rounded",
            "px-1",
            "m-1",
            "my-2",
            "para",
            "d-block"
          );
          para.innerText = all_links[i];
          para.setAttribute("href", all_links[i]);
          para.setAttribute("target", "_blank");
          L_display.append(para);
        }

        // const unique = linkArr.filter((value, index) => {
        //   return linkArr.indexOf(value) === index;
        // });
        // for (var i = 0; i < unique.length; i++) {
        //linkArr.push(unique);
        //console.log(unique);
        //return L_display;
        //all_links.push(unique);
        //}
      }

      //Skills PERCENTAGE
      function skills_add() {
        var skillsInput = document.getElementById("skills").value;
        if (skillsInput.trim() == "") {
          return;
        }
        var skills = convert_string_to_array(skillsInput);
        let skd = document.getElementById("skills_display");
        for (let i = 0; i < skills.length; i++) {
          if (document.getElementById(skills[i])) {
            continue;
          }

          let skilContainer = document.createElement("div");
          skilContainer.classList.add("d-flex", "align-items-center", "my-2");
          let span = document.createElement("label");
          span.classList.add("form-label", "mb-0", "me-2", "text-success");
          span.innerHTML = skills[i];
          var new_sl = document.createElement("select");
          new_sl.classList.add("form-select");
          new_sl.setAttribute("id", skills[i]);
          new_sl.setAttribute("name", "expertise");
          for (let k = 1; k <= 5; k++) {
            option_helper(new_sl, k * 20);
          }
          skilContainer.append(span);
          skilContainer.append(new_sl);
          skd.appendChild(skilContainer);
        }
      }

      // REMOVE BUTTON
      var del = document.querySelector("#remove");
      del.addEventListener("click", (event) => {
        event.preventDefault();
        let btn = event.target;
        let skillsDiv = document.getElementById("skills_display");
        /* skillsDiv.childNodes.forEach((node) => {
                      node.remove();
                    }); */
        skillsDiv.innerHTML = "";
      });

      function option_helper(sel, val) {
        let option = document.createElement("option");
        option.setAttribute("value", val);
        option.innerHTML = val + "%";
        sel.appendChild(option);
        document.getElementById("skills").value = "";
      }

      function convert_string_to_array(skillsInput) {
        let skills = skillsInput.split(",");
        return skills;
      }

      function template_design_1(cvData) {
        console.log(cvData);
        let cv_section = document.getElementById("cv");
        cv_section.innerHTML = "";

        let section_left = document.createElement("section");
        section_left.setAttribute("id", "left_1");
        //section_left.setAttribute("class", "col-4 bg-dark text-light p-0");
        section_left.classList.add("col-4", "bg-dark", "text-light", "p-0");

        let introContainer = document.createElement("div");
        introContainer.classList.add("sub-head");

        let sub_head_1 = document.createElement("div");
        sub_head_1.classList.add(
          "sub-head ",
          "d-flex",
          "align-items-center",
          "p-2"
        );
        //sub_head_1.setAttribute("class", "sub-head");
        //sub_head_1.classList.add("sub-head");

        let name = document.createElement("h2");
        name.innerText = cvData.name;
        let designation = document.createElement("p");
        designation.innerText = "";

        sub_head_1.appendChild(name);
        sub_head_1.appendChild(designation);
        introContainer.appendChild(sub_head_1);

        let picContainer = document.createElement("div");
        picContainer.classList.add("pic");
        let image = document.createElement("img");
        image.classList.add("img", "img-fluid", "rounded-circle");
        image.setAttribute("id", "cvPhoto");
        image.innerText = cvData.profile;

        picContainer.appendChild(image);
        introContainer.appendChild(picContainer);

        section_left.appendChild(introContainer);

        let h_4_1 = document.createElement("h4");
        //h_4_1.setAttribute("class", "left-sidebar-secondary-heading");
        h_4_1.classList.add("left-sidebar-secondary-heading");
        h_4_1.innerText = "Personal info";

        let sub_head_2 = document.createElement("div");
        //sub_head_2.setAttribute("class", "sub-head");
        sub_head_2.classList.add("sub-head");

        let span_1 = document.createElement("span");
        span_1.innerText = "Phone";

        let p_1 = document.createElement("p");
        //p_1.setAttribute("class", "fw-lighter");
        p_1.classList.add("fw-lighter");
        p_1.innerText = cvData.contact;

        section_left.appendChild(h_4_1);
        sub_head_2.appendChild(span_1);
        sub_head_2.appendChild(p_1);
        section_left.appendChild(sub_head_2);

        let sub_head_3 = document.createElement("div");
        //sub_head_3.setAttribute("class", "sub-head");
        sub_head_3.classList.add("sub-head");

        let span_2 = document.createElement("span");
        span_2.innerText = "Email";

        let P_2 = document.createElement("p");
        //p_2.setAttribute("class", "fw-lighter");
        P_2.classList.add("fw-lighter");
        P_2.innerText = cvData.email;

        sub_head_3.appendChild(span_2);
        sub_head_3.appendChild(P_2);
        section_left.appendChild(sub_head_3);

        let sub_head_4 = document.createElement("div");
        //sub_head_4.setAttribute("class", "sub-head");
        sub_head_4.classList.add("sub-head");

        let span_3 = document.createElement("span");
        span_3.innerText = "Links";

        let P_3 = document.createElement("p");
        //p_3.setAttribute("class", "fw-lighter");
        P_3.classList.add("fw-lighter");
        P_3.innerText = cvData.links;

        sub_head_4.appendChild(span_3);
        sub_head_4.appendChild(P_3);
        section_left.appendChild(sub_head_4);

        let Skills = document.createElement("h4");
        // h_4_2.setAttribute("class", "left-sidebar-secondary-heading");
        Skills.classList.add("left-sidebar-secondary-heading");
        Skills.innerText = "Skills";
        section_left.appendChild(Skills);

        cvData.skills.forEach((skill) => {
          let skillContainer = document.createElement("div");
          skillContainer.classList.add("sub-head");

          let skillName = document.createElement("p");
          skillName.classList.add("fw-lighter");
          skillName.innerText = skill.name;

          let skillProgressBar = document.createElement("div");
          skillProgressBar.classList.add("progress");

          let skillProgressValue = document.createElement("div");
          skillProgressValue.classList.add("progress-bar");
          skillProgressValue.style.width = skill.percentage + "%";

          skillContainer.appendChild(skillName);
          skillProgressBar.appendChild(skillProgressValue);
          skillContainer.appendChild(skillProgressBar);

          section_left.appendChild(skillContainer);
        });

        let Language = document.createElement("h4");
        Language.classList.add("left-sidebar-secondary-heading");
        Language.innerText = "Language";
        section_left.appendChild(Language);

        let LanguageContainer = document.createElement("div");
        Language.classList.add("sub-head");

        let LanguageList = document.createElement("ul");
        cvData.language.forEach((lang) => {
          let languageElem = document.createElement("li");
          languageElem.innerText = lang;
          LanguageList.appendChild(languageElem);
        });

        LanguageContainer.appendChild(LanguageList);
        section_left.appendChild(LanguageContainer);

        //SECTION RIGHT

        let section_right = document.createElement("section");
        section_right.setAttribute("id", "right_1");
        //section_right.setAttribute("class", "col-8");
        section_right.classList.add("col-8");

        let d_1 = document.createElement("div");

        let pa_1 = document.createElement("p");
        pa_1.classList.add("fw-lighter");
        pa_1.innerText = cvData.objective;

        d_1.appendChild(pa_1);
        section_right.appendChild(d_1);

        let hr_1 = document.createElement("hr");
        section_right.appendChild(hr_1);

        let head_1 = document.createElement("h4");
        head_1.innerText = "Projects";
        let hr_2 = document.createElement("hr");
        section_right.appendChild(head_1);
        section_right.appendChild(hr_2);

        cvData.Projects.forEach((project) => {
          let projectsContainer = document.createElement("div");
          projectsContainer.classList.add("exp");

          let projectTitle = document.createElement("div");
          let projectDescription = document.createElement("div");
          let porjectName = document.createElement("p");
          porjectName.innerText = project.project;
          let projectExplaination = document.createElement("p");
          projectExplaination.classList.add("fw-lighter");
          projectExplaination.innerText = project.description;

          projectTitle.appendChild(porjectName);
          projectsContainer.appendChild(projectTitle);

          projectDescription.appendChild(projectExplaination);
          projectsContainer.appendChild(projectDescription);

          section_right.appendChild(projectsContainer);
        });

        let hr_3 = document.createElement("hr");
        section_right.appendChild(hr_3);

        let head_2 = document.createElement("h4");
        head_2.innerText = "Education";
        let hr_4 = document.createElement("hr");
        section_right.appendChild(head_2);
        section_right.appendChild(hr_4);

        cvData.Educations.forEach((Education) => {
          let educationContainer = document.createElement("div");
          educationContainer.classList.add("exp");

          let Dates = document.createElement("div");
          Dates.classList.add("d-flex", "align-items-center");
          let Name = document.createElement("div");
          Name.classList.add("d-flex", "align-items-center");
          let sDate = document.createElement("p");
          sDate.classList.add("fw-lighter");
          sDate.innerText = Education.startDate + " - " + Education.endDate;
          // let eDate = document.createElement("p");
          // eDate.classList.add("fw-lighter");
          // eDate.innerText = Education.endDate;
          let DName = document.createElement("p");
          DName.setAttribute("id", "degreename");
          DName.innerText = Education.degreeName;

          let I_n = document.createElement("div");
          I_n.classList.add("d-flex", "align-items-center");
          let Institute_N = document.createElement("p");
          Institute_N.classList.add("fw-lighter");
          Institute_N.innerText = Education.institute;

          Dates.appendChild(sDate);
          educationContainer.appendChild(Dates);

          Name.appendChild(DName);
          Name.appendChild(Institute_N);
          educationContainer.appendChild(Name);

          I_n.appendChild(Institute_N);
          educationContainer.appendChild(I_n);

          section_right.appendChild(educationContainer);
        });

        let Exp_head = document.createElement("h4");
        Exp_head.innerText = "Experience";
        let hr_5 = document.createElement("hr");
        section_right.appendChild(Exp_head);
        section_right.appendChild(hr_5);

        cvData.Experiences.forEach((Experience) => {
          let experienceContainer = document.createElement("div");
          experienceContainer.classList.add("exp");

          let Dates = document.createElement("div");
          let Name = document.createElement("div");
          let sDate = document.createElement("p");
          sDate.classList.add("fw-lighter");
          sDate.innerText = Experience.startDate + "," + Experience.endDate;
          // let eDate = document.createElement("p");
          // eDate.classList.add("fw-lighter");
          // eDate.innerText = Experience.endDate;
          let CName = document.createElement("p");
          CName.innerText = Experience.companyName;
          let jobDescription = document.createElement("p");
          jobDescription.classList.add("fw-lighter");
          jobDescription.innerText = Experience.jobdescription;

          Dates.appendChild(sDate);
          experienceContainer.appendChild(Dates);

          Name.appendChild(CName);
          Name.appendChild(jobDescription);
          experienceContainer.appendChild(Name);

          section_right.appendChild(experienceContainer);
        });

        cv_section.appendChild(section_left);
        cv_section.appendChild(section_right);
      }

      //2ND TEMPLATE
      function template_design_2(cvData) {
        let cv_section2 = document.getElementById("cv");
        cv_section2.innerHTML = "";

        let section_top = document.createElement("section");
        section_top.setAttribute("id", "top");
        section_top.classList.add("bg-dark", "text-light", "d-flex");

        //profile
        let cv_pic = document.createElement("div");
        cv_pic.classList.add("col-md-2");
        let pic = document.createElement("img");
        pic.classList.add("img", "img-fluid");
        pic.setAttribute("id", "cvPhoto");
        pic.innerText = cvData.profile;

        cv_pic.appendChild(pic);
        section_top.appendChild(cv_pic);

        let infoContainer = document.createElement("div");
        infoContainer.classList.add("col-md-5");

        let nameContainer = document.createElement("div");
        let name = document.createElement("h4");
        name.innerText = cvData.name;
        let designation = document.createElement("p");
        //NAME
        nameContainer.appendChild(name);
        nameContainer.appendChild(designation);
        infoContainer.appendChild(nameContainer);
        //PHONE
        let phoneContainer = document.createElement("div");
        phoneContainer.setAttribute("id", "d-inline");
        let phone = document.createElement("span");
        phone.classList.add("badge", "bg-secondary");
        phone.innerText = "Phone:";
        let phoneNumber = document.createElement("p");
        phoneNumber.innerText = cvData.contact;

        phoneContainer.appendChild(phone);
        phoneContainer.appendChild(phoneNumber);
        infoContainer.appendChild(phoneContainer);

        //EMAIL

        let EmailContainer = document.createElement("div");
        EmailContainer.setAttribute("id", "d-inline");
        let email = document.createElement("span");
        email.classList.add("badge", "bg-secondary");
        email.innerText = "E-mail:";
        let emailAddress = document.createElement("p");
        emailAddress.innerText = cvData.email;

        EmailContainer.appendChild(email);
        EmailContainer.appendChild(emailAddress);
        infoContainer.appendChild(EmailContainer);

        //LINKS
        let linkContainer = document.createElement("div");
        let links = document.createElement("span");
        links.classList.add("badge", "bg-secondary");
        links.innerText = "Links:";
        let linkAddress = document.createElement("p");
        linkAddress.innerText = cvData.links;

        linkContainer.appendChild(links);
        linkContainer.appendChild(linkAddress);
        infoContainer.appendChild(linkContainer);

        section_top.appendChild(infoContainer);

        let proInfo = document.createElement("div");
        proInfo.classList.add("col-md-5");

        //SKILLS
        let skillContainer = document.createElement("div");
        let skillsHeading = document.createElement("h6");
        skillsHeading.innerText = "Skills";
        skillContainer.appendChild(skillsHeading);

        cvData.skills.forEach((skill) => {
          // let proInfo = document.createElement("div");
          // proInfo.classList.add("col-md-5");
          let skills_display = document.createElement("p");
          skills_display.classList.add("badge", "bg-secondary");
          skills_display.innerText = skill.name;
          skillContainer.appendChild(skills_display);
        });

        proInfo.appendChild(skillContainer);

        //LNAGUAGE
        let languageContainer = document.createElement("div");
        let language = document.createElement("h6");
        language.classList.add("pt-3");
        language.innerText = "Languages";
        let languageDisplay = document.createElement("p");
        languageDisplay.innerText = cvData.language;

        languageContainer.appendChild(language);
        languageContainer.appendChild(languageDisplay);
        proInfo.appendChild(languageContainer);

        section_top.appendChild(proInfo);
        cv_section2.appendChild(section_top);

        //OBJECTIVE
        let objectiveContainer = document.createElement("div");
        objectiveContainer.classList.add("bg-light");
        let objective = document.createElement("p");
        objective.innerText = cvData.objective;

        objectiveContainer.appendChild(objective);

        cv_section2.appendChild(objectiveContainer);

        let section_bottom = document.createElement("section");
        section_bottom.classList.add("col-12");
        section_bottom.setAttribute("id", "bottom");

        //EXPERIENCE
        let exp_head = document.createElement("div");
        exp_head.classList.add("bg-light", "col-9", "offset-3", "mt-3");
        let experience = document.createElement("h4");
        experience.innerText = "Experience";

        exp_head.appendChild(experience);
        section_bottom.appendChild(exp_head);

        cvData.Experiences.forEach((Experience) => {
          let experienceContainer = document.createElement("div");
          experienceContainer.classList.add("d-flex");

          let Dates = document.createElement("div");
          Dates.classList.add("bg-light", "col-md-3", "mt-3");
          let sDate = document.createElement("p");
          //sDate.classList.add("fw-lighter");
          sDate.innerText = Experience.startDate + "," + Experience.endDate;
          // let eDate = document.createElement("p");
          // eDate.classList.add("fw-lighter");
          // eDate.innerText = Experience.endDate;
          let Name = document.createElement("div");
          let CName = document.createElement("h6");
          //let CName = document.createElement("p");
          CName.innerText = Experience.companyName;
          let jobDescription = document.createElement("p");
          //jobDescription.classList.add("fw-lighter");
          jobDescription.innerText = Experience.jobdescription;

          Dates.appendChild(sDate);
          experienceContainer.appendChild(Dates);

          //Name.appendChild(job_title);
          Name.appendChild(CName);
          Name.appendChild(jobDescription);
          experienceContainer.appendChild(Name);

          section_bottom.appendChild(experienceContainer);
        });

        //EDUCATION
        let edu_head = document.createElement("div");
        edu_head.classList.add("bg-light", "col-9", "offset-3", "mt-2");
        let education = document.createElement("h4");
        education.innerText = "Education";

        edu_head.appendChild(education);
        section_bottom.appendChild(edu_head);

        cvData.Educations.forEach((Education) => {
          let educationContainer = document.createElement("div");
          educationContainer.classList.add("d-flex");

          let Dates = document.createElement("div");
          Dates.classList.add("bg-light", "col-md-3", "mt-3");
          let sDate = document.createElement("p");
          //sDate.classList.add("fw-lighter");
          sDate.innerText = Education.startDate + "," + Education.endDate;
          // let eDate = document.createElement("p");
          // eDate.classList.add("fw-lighter");
          // eDate.innerText = Experience.endDate;
          let Name = document.createElement("div");
          let DName = document.createElement("p");
          DName.innerText = Education.degreeName;
          let instituteName = document.createElement("p");
          //jobDescription.classList.add("fw-lighter");
          instituteName.innerText = Education.institute;

          Dates.appendChild(sDate);
          educationContainer.appendChild(Dates);

          Name.appendChild(DName);
          Name.appendChild(instituteName);
          educationContainer.appendChild(Name);

          section_bottom.appendChild(educationContainer);
        });

        //PROJECTS
        let project_head = document.createElement("div");
        project_head.classList.add("bg-light", "col-9", "offset-3", "mt-2");
        let project = document.createElement("h4");
        project.innerText = "Projects";

        project_head.appendChild(project);
        section_bottom.appendChild(project_head);

        cvData.Projects.forEach((project) => {
          let projectsContainer = document.createElement("div");
          projectsContainer.classList.add("col-md-9", "offset-md-3");

          //let projectTitle = document.createElement("div");
          //let projectDescription = document.createElement("div");
          let porjectName = document.createElement("h6");
          porjectName.innerText = project.project;
          let projectExplaination = document.createElement("p");
          //projectExplaination.classList.add("fw-lighter");
          projectExplaination.innerText = project.description;

          //projectTitle.appendChild(porjectName);
          projectsContainer.appendChild(porjectName);

          projectsContainer.appendChild(projectExplaination);
          //projectsContainer.appendChild(projectDescription);

          section_bottom.appendChild(projectsContainer);
        });
        cv_section2.appendChild(section_bottom);
      }

      (function () {
        initRender();
      })();
    </script>
  </body>
</html>
<!-- sub-head d-flex justify-content-start align-items-center -->
